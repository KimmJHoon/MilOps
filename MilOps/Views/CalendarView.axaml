<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:MilOps.ViewModels"
             x:Class="MilOps.Views.CalendarView"
             x:DataType="vm:CalendarViewModel">

  <UserControl.Resources>
    <!-- 캘린더 셀 템플릿 -->
    <DataTemplate x:Key="CalendarCellTemplate" x:DataType="vm:CalendarDay">
      <Border BorderBrush="#2c2c2e" BorderThickness="0.5" Background="#1c1c1e" ClipToBounds="True">
        <Grid Margin="2">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
          </Grid.RowDefinitions>

          <!-- 날짜 숫자 -->
          <TextBlock Grid.Row="0" Text="{Binding DayText}" FontSize="12" Foreground="{Binding DayColor}"
                     HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,2,0,0"/>

          <!-- 일정 점 표시 영역 -->
          <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="4"
                      IsVisible="{Binding HasSchedules}">
            <!-- 확정 일정 점 (초록색) -->
            <Border Width="8" Height="8" CornerRadius="4" Background="#00a872"
                    IsVisible="{Binding HasConfirmedSchedule}"/>
            <!-- 예약(미확정) 일정 점 (주황색) -->
            <Border Width="8" Height="8" CornerRadius="4" Background="#deb887"
                    IsVisible="{Binding HasReservedSchedule}"/>
          </StackPanel>
        </Grid>
      </Border>
    </DataTemplate>
  </UserControl.Resources>

  <Grid Background="#0a0a0a">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!-- 월 네비게이션 - iOS 스타일 -->
    <Border Grid.Row="0" Background="#1c1c1e" Padding="12,16" CornerRadius="0,0,20,20">
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="Auto"/>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <Button Grid.Column="0" Command="{Binding PreviousMonthCommand}"
                Background="#2c2c2e" BorderThickness="0" Padding="12,8" CornerRadius="12">
          <TextBlock Text="&#xe5cb;" FontFamily="{StaticResource MaterialIcons}"
                     FontSize="24" Foreground="#00a872"/>
        </Button>

        <TextBlock Grid.Column="1" Text="{Binding CurrentMonthYear}"
                   FontSize="22" Foreground="#effdf6"
                   HorizontalAlignment="Center" VerticalAlignment="Center"/>

        <Button Grid.Column="2" Command="{Binding NextMonthCommand}"
                Background="#2c2c2e" BorderThickness="0" Padding="12,8" CornerRadius="12">
          <TextBlock Text="&#xe5cc;" FontFamily="{StaticResource MaterialIcons}"
                     FontSize="24" Foreground="#00a872"/>
        </Button>
      </Grid>
    </Border>

    <!-- 범례 - 카드 스타일 -->
    <Border Grid.Row="1" Background="#1c1c1e" Padding="16,12" Margin="12,12,12,0" CornerRadius="12">
      <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="32">
        <StackPanel Orientation="Horizontal" Spacing="8">
          <Border Width="16" Height="16" CornerRadius="8" Background="#00a872"/>
          <TextBlock Text="확정" Foreground="#b0b0b0" FontSize="13" VerticalAlignment="Center"/>
        </StackPanel>
        <StackPanel Orientation="Horizontal" Spacing="8">
          <Border Width="16" Height="16" CornerRadius="8" Background="#deb887"/>
          <TextBlock Text="예약 (미확정)" Foreground="#b0b0b0" FontSize="13" VerticalAlignment="Center"/>
        </StackPanel>
      </StackPanel>
    </Border>

    <!-- 요일 헤더 -->
    <Border Grid.Row="2" Background="Transparent" Padding="12,12,12,8">
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <TextBlock Grid.Column="0" Text="일" Foreground="#ff6b6b" FontSize="14" HorizontalAlignment="Center"/>
        <TextBlock Grid.Column="1" Text="월" Foreground="#808080" FontSize="14" HorizontalAlignment="Center"/>
        <TextBlock Grid.Column="2" Text="화" Foreground="#808080" FontSize="14" HorizontalAlignment="Center"/>
        <TextBlock Grid.Column="3" Text="수" Foreground="#808080" FontSize="14" HorizontalAlignment="Center"/>
        <TextBlock Grid.Column="4" Text="목" Foreground="#808080" FontSize="14" HorizontalAlignment="Center"/>
        <TextBlock Grid.Column="5" Text="금" Foreground="#808080" FontSize="14" HorizontalAlignment="Center"/>
        <TextBlock Grid.Column="6" Text="토" Foreground="#6b9fff" FontSize="14" HorizontalAlignment="Center"/>
      </Grid>
    </Border>

    <!-- 날짜 그리드 - 6주 고정 레이아웃 -->
    <Border Grid.Row="3" Margin="8,0,8,8" CornerRadius="16" ClipToBounds="True">
      <Grid Background="#1c1c1e" Name="CalendarGrid">
        <Grid.RowDefinitions>
          <RowDefinition Height="*"/>
          <RowDefinition Height="*"/>
          <RowDefinition Height="*"/>
          <RowDefinition Height="*"/>
          <RowDefinition Height="*"/>
          <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Week 1 -->
        <Button Grid.Row="0" Grid.Column="0" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[0]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[0]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="0" Grid.Column="1" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[1]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[1]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="0" Grid.Column="2" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[2]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[2]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="0" Grid.Column="3" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[3]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[3]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="0" Grid.Column="4" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[4]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[4]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="0" Grid.Column="5" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[5]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[5]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="0" Grid.Column="6" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[6]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[6]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>

        <!-- Week 2 -->
        <Button Grid.Row="1" Grid.Column="0" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[7]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[7]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="1" Grid.Column="1" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[8]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[8]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="1" Grid.Column="2" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[9]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[9]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="1" Grid.Column="3" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[10]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[10]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="1" Grid.Column="4" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[11]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[11]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="1" Grid.Column="5" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[12]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[12]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="1" Grid.Column="6" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[13]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[13]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>

        <!-- Week 3 -->
        <Button Grid.Row="2" Grid.Column="0" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[14]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[14]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="2" Grid.Column="1" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[15]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[15]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="2" Grid.Column="2" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[16]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[16]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="2" Grid.Column="3" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[17]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[17]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="2" Grid.Column="4" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[18]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[18]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="2" Grid.Column="5" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[19]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[19]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="2" Grid.Column="6" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[20]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[20]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>

        <!-- Week 4 -->
        <Button Grid.Row="3" Grid.Column="0" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[21]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[21]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="3" Grid.Column="1" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[22]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[22]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="3" Grid.Column="2" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[23]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[23]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="3" Grid.Column="3" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[24]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[24]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="3" Grid.Column="4" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[25]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[25]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="3" Grid.Column="5" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[26]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[26]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="3" Grid.Column="6" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[27]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[27]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>

        <!-- Week 5 -->
        <Button Grid.Row="4" Grid.Column="0" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[28]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[28]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="4" Grid.Column="1" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[29]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[29]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="4" Grid.Column="2" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[30]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[30]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="4" Grid.Column="3" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[31]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[31]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="4" Grid.Column="4" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[32]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[32]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="4" Grid.Column="5" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[33]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[33]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="4" Grid.Column="6" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[34]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[34]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>

        <!-- Week 6 -->
        <Button Grid.Row="5" Grid.Column="0" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[35]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[35]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="5" Grid.Column="1" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[36]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[36]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="5" Grid.Column="2" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[37]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[37]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="5" Grid.Column="3" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[38]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[38]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="5" Grid.Column="4" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[39]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[39]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="5" Grid.Column="5" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[40]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[40]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
        <Button Grid.Row="5" Grid.Column="6" Command="{Binding SelectDayCommand}" CommandParameter="{Binding Days[41]}"
                Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch"
                Content="{Binding Days[41]}" ContentTemplate="{StaticResource CalendarCellTemplate}"/>
      </Grid>
    </Border>

    <!-- 로딩 오버레이 -->
    <Border Grid.RowSpan="4"
            Background="#CC0a0a0a"
            IsVisible="{Binding IsLoading}">
      <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Spacing="16">
        <TextBlock Text="&#xe627;" FontFamily="{StaticResource MaterialIcons}"
                   FontSize="36" Foreground="#00a872" HorizontalAlignment="Center"/>
        <TextBlock Text="일정 로딩 중..."
                   Foreground="#effdf6"
                   FontSize="16"
                   HorizontalAlignment="Center"/>
      </StackPanel>
    </Border>

    <!-- 선택한 날짜의 일정 목록 패널 -->
    <Border Grid.RowSpan="4"
            Background="#E60a0a0a"
            IsVisible="{Binding HasSelectedDaySchedules}">
      <Border Background="#1c1c1e" CornerRadius="20" Margin="16" Padding="20"
              VerticalAlignment="Center" MaxHeight="500">
        <Grid RowDefinitions="Auto,*,Auto">
          <!-- 헤더 -->
          <Grid Grid.Row="0" ColumnDefinitions="*,Auto" Margin="0,0,0,16">
            <StackPanel Orientation="Horizontal" Spacing="10">
              <TextBlock Text="&#xe935;" FontFamily="{StaticResource MaterialIcons}"
                         FontSize="24" Foreground="#00a872" VerticalAlignment="Center"/>
              <TextBlock Text="{Binding SelectedDayTitle}" FontSize="18" Foreground="#effdf6"
                         VerticalAlignment="Center"/>
            </StackPanel>
            <Button Grid.Column="1" Command="{Binding CloseSelectedDaySchedulesCommand}"
                    Background="#2c2c2e" Padding="8" CornerRadius="10">
              <TextBlock Text="&#xe5cd;" FontFamily="{StaticResource MaterialIcons}"
                         FontSize="20" Foreground="#808080"/>
            </Button>
          </Grid>

          <!-- 일정 목록 -->
          <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <ItemsControl ItemsSource="{Binding SelectedDaySchedules}">
              <ItemsControl.ItemTemplate>
                <DataTemplate x:DataType="vm:CalendarScheduleItem">
                  <Button Command="{Binding $parent[ItemsControl].((vm:CalendarViewModel)DataContext).OpenScheduleDetailCommand}"
                          CommandParameter="{Binding}"
                          Background="Transparent" Padding="0" Margin="0,0,0,10"
                          HorizontalAlignment="Stretch"
                          HorizontalContentAlignment="Stretch">
                    <Border Background="#2c2c2e" CornerRadius="14" Padding="16">
                      <Grid RowDefinitions="Auto,Auto,Auto">
                        <!-- 업체명 + 상태 -->
                        <Grid Grid.Row="0" ColumnDefinitions="*,Auto">
                          <TextBlock Text="{Binding CompanyName}" FontSize="15" Foreground="#effdf6"
                                     TextTrimming="CharacterEllipsis"/>
                          <Border Grid.Column="1" Background="{Binding StatusColor}"
                                  CornerRadius="8" Padding="10,5" Margin="10,0,0,0">
                            <TextBlock Text="{Binding StatusDisplayName}" FontSize="12" Foreground="White"/>
                          </Border>
                        </Grid>

                        <!-- 시간 -->
                        <StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="8" Margin="0,10,0,0">
                          <TextBlock Text="&#xe8b5;" FontFamily="{StaticResource MaterialIcons}"
                                     FontSize="16" Foreground="#00a872" VerticalAlignment="Center"/>
                          <TextBlock Text="{Binding TimeDisplay}" FontSize="14" Foreground="#00a872"/>
                        </StackPanel>

                        <!-- 확정 상태 -->
                        <StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="8" Margin="0,8,0,0">
                          <TextBlock Text="&#xe876;" FontFamily="{StaticResource MaterialIcons}"
                                     FontSize="14" Foreground="#808080" VerticalAlignment="Center"/>
                          <TextBlock Text="{Binding ConfirmStatusText}" FontSize="13" Foreground="#a0a0a0"/>
                        </StackPanel>
                      </Grid>
                    </Border>
                  </Button>
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ItemsControl>
          </ScrollViewer>

          <!-- 안내 텍스트 -->
          <Border Grid.Row="2" Background="#2c2c2e" CornerRadius="10" Padding="12" Margin="0,12,0,0">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="8">
              <TextBlock Text="&#xe88e;" FontFamily="{StaticResource MaterialIcons}"
                         FontSize="14" Foreground="#6a6a6a" VerticalAlignment="Center"/>
              <TextBlock Text="일정을 탭하여 상세 정보를 확인하세요" FontSize="12" Foreground="#6a6a6a"/>
            </StackPanel>
          </Border>
        </Grid>
      </Border>
    </Border>
  </Grid>
</UserControl>
