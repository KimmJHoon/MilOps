<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:MilOps.ViewModels"
             xmlns:views="using:MilOps.Views"
             mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="800"
             x:Class="MilOps.Views.MainView"
             x:DataType="vm:MainViewModel">
  <Design.DataContext>
    <vm:MainViewModel />
  </Design.DataContext>

  <Panel>
    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <Grid Background="#000000">
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto"/>
      </Grid.RowDefinitions>

      <!-- ìƒë‹¨ í—¤ë” -->
      <Border Grid.Row="0" Background="#333333" Padding="12">
        <Grid>
          <Button Command="{Binding ToggleDrawerCommand}"
                  Background="Transparent" BorderThickness="0"
                  HorizontalAlignment="Left" Padding="5,0">
            <TextBlock Text="â˜°" FontSize="22" Foreground="White"/>
          </Button>
          <TextBlock Text="{Binding CurrentPageTitle}"
                     FontSize="18"
                     Foreground="White"
                     HorizontalAlignment="Center"
                     VerticalAlignment="Center"/>
        </Grid>
      </Border>

    <!-- ì¤‘ì•™ ì½˜í…ì¸  ì˜ì—­ -->
    <Grid Grid.Row="1">
      <Border IsVisible="{Binding IsCalendarSelected}">
        <views:CalendarView/>
      </Border>
      <Border IsVisible="{Binding IsScheduleSelected}">
        <views:ScheduleListView/>
      </Border>
      <Border IsVisible="{Binding IsManagerSelected}">
        <views:ManagerView/>
      </Border>
      <Border IsVisible="{Binding IsNotificationSelected}">
        <views:NotificationView/>
      </Border>
      <Border IsVisible="{Binding IsSettingsSelected}">
        <views:SettingsView/>
      </Border>
    </Grid>

    <!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <Border Grid.Row="2" Background="#333333" Padding="2">
      <Panel>
      <!-- ì‚¬ìš©ìžìš© ë©”ë‰´: ìº˜ë¦°ë” - ì¼ì • - ì•Œë¦¼ (3ê°œ) -->
      <Grid IsVisible="{Binding IsUser}">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- ìº˜ë¦°ë” -->
        <Button Grid.Column="0" Command="{Binding SelectTabCommand}" CommandParameter="calendar"
                Background="Transparent" BorderThickness="0" HorizontalAlignment="Stretch" Padding="2,0">
          <StackPanel HorizontalAlignment="Center" Spacing="0">
            <TextBlock Text="ðŸ“…" FontSize="14" HorizontalAlignment="Center"/>
            <Panel>
              <TextBlock Text="ìº˜ë¦°ë”" FontSize="12" HorizontalAlignment="Center" Foreground="#00FF00"
                         IsVisible="{Binding IsCalendarSelected}"/>
              <TextBlock Text="ìº˜ë¦°ë”" FontSize="12" HorizontalAlignment="Center" Foreground="White"
                         IsVisible="{Binding !IsCalendarSelected}"/>
            </Panel>
          </StackPanel>
        </Button>

        <!-- ì¼ì • -->
        <Button Grid.Column="1" Command="{Binding SelectTabCommand}" CommandParameter="schedule"
                Background="Transparent" BorderThickness="0" HorizontalAlignment="Stretch" Padding="2,0">
          <StackPanel HorizontalAlignment="Center" Spacing="0">
            <TextBlock Text="ðŸ“‹" FontSize="14" HorizontalAlignment="Center"/>
            <Panel>
              <TextBlock Text="ì¼ì •" FontSize="12" HorizontalAlignment="Center" Foreground="#00FF00"
                         IsVisible="{Binding IsScheduleSelected}"/>
              <TextBlock Text="ì¼ì •" FontSize="12" HorizontalAlignment="Center" Foreground="White"
                         IsVisible="{Binding !IsScheduleSelected}"/>
            </Panel>
          </StackPanel>
        </Button>

        <!-- ì•Œë¦¼ -->
        <Button Grid.Column="2" Command="{Binding SelectTabCommand}" CommandParameter="notification"
                Background="Transparent" BorderThickness="0" HorizontalAlignment="Stretch" Padding="2,0">
          <StackPanel HorizontalAlignment="Center" Spacing="0">
            <TextBlock Text="ðŸ””" FontSize="14" HorizontalAlignment="Center"/>
            <Panel>
              <TextBlock Text="ì•Œë¦¼" FontSize="12" HorizontalAlignment="Center" Foreground="#00FF00"
                         IsVisible="{Binding IsNotificationSelected}"/>
              <TextBlock Text="ì•Œë¦¼" FontSize="12" HorizontalAlignment="Center" Foreground="White"
                         IsVisible="{Binding !IsNotificationSelected}"/>
            </Panel>
          </StackPanel>
        </Button>
      </Grid>

      <!-- ì¤‘ê°„ê´€ë¦¬ìžìš© ë©”ë‰´: ìº˜ë¦°ë” - ì¼ì • - ì•Œë¦¼ - ë‹´ë‹¹ìž (4ê°œ) -->
      <Grid IsVisible="{Binding IsMiddleAdmin}">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- ìº˜ë¦°ë” -->
        <Button Grid.Column="0" Command="{Binding SelectTabCommand}" CommandParameter="calendar"
                Background="Transparent" BorderThickness="0" HorizontalAlignment="Stretch" Padding="2,0">
          <StackPanel HorizontalAlignment="Center" Spacing="0">
            <TextBlock Text="ðŸ“…" FontSize="14" HorizontalAlignment="Center"/>
            <Panel>
              <TextBlock Text="ìº˜ë¦°ë”" FontSize="11" HorizontalAlignment="Center" Foreground="#00FF00"
                         IsVisible="{Binding IsCalendarSelected}"/>
              <TextBlock Text="ìº˜ë¦°ë”" FontSize="11" HorizontalAlignment="Center" Foreground="White"
                         IsVisible="{Binding !IsCalendarSelected}"/>
            </Panel>
          </StackPanel>
        </Button>

        <!-- ì¼ì • -->
        <Button Grid.Column="1" Command="{Binding SelectTabCommand}" CommandParameter="schedule"
                Background="Transparent" BorderThickness="0" HorizontalAlignment="Stretch" Padding="2,0">
          <StackPanel HorizontalAlignment="Center" Spacing="0">
            <TextBlock Text="ðŸ“‹" FontSize="14" HorizontalAlignment="Center"/>
            <Panel>
              <TextBlock Text="ì¼ì •" FontSize="11" HorizontalAlignment="Center" Foreground="#00FF00"
                         IsVisible="{Binding IsScheduleSelected}"/>
              <TextBlock Text="ì¼ì •" FontSize="11" HorizontalAlignment="Center" Foreground="White"
                         IsVisible="{Binding !IsScheduleSelected}"/>
            </Panel>
          </StackPanel>
        </Button>

        <!-- ì•Œë¦¼ -->
        <Button Grid.Column="2" Command="{Binding SelectTabCommand}" CommandParameter="notification"
                Background="Transparent" BorderThickness="0" HorizontalAlignment="Stretch" Padding="2,0">
          <StackPanel HorizontalAlignment="Center" Spacing="0">
            <TextBlock Text="ðŸ””" FontSize="14" HorizontalAlignment="Center"/>
            <Panel>
              <TextBlock Text="ì•Œë¦¼" FontSize="11" HorizontalAlignment="Center" Foreground="#00FF00"
                         IsVisible="{Binding IsNotificationSelected}"/>
              <TextBlock Text="ì•Œë¦¼" FontSize="11" HorizontalAlignment="Center" Foreground="White"
                         IsVisible="{Binding !IsNotificationSelected}"/>
            </Panel>
          </StackPanel>
        </Button>

        <!-- ë‹´ë‹¹ìž -->
        <Button Grid.Column="3" Command="{Binding SelectTabCommand}" CommandParameter="manager"
                Background="Transparent" BorderThickness="0" HorizontalAlignment="Stretch" Padding="2,0">
          <StackPanel HorizontalAlignment="Center" Spacing="0">
            <TextBlock Text="ðŸ‘¥" FontSize="14" HorizontalAlignment="Center"/>
            <Panel>
              <TextBlock Text="ë‹´ë‹¹ìž" FontSize="11" HorizontalAlignment="Center" Foreground="#00FF00"
                         IsVisible="{Binding IsManagerSelected}"/>
              <TextBlock Text="ë‹´ë‹¹ìž" FontSize="11" HorizontalAlignment="Center" Foreground="White"
                         IsVisible="{Binding !IsManagerSelected}"/>
            </Panel>
          </StackPanel>
        </Button>
      </Grid>

      <!-- ìµœì¢…ê´€ë¦¬ìžìš© ë©”ë‰´: ìº˜ë¦°ë” - ì•Œë¦¼ - ë‹´ë‹¹ìžê´€ë¦¬ (3ê°œ) -->
      <Grid IsVisible="{Binding IsSuperAdmin}">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- ìº˜ë¦°ë” -->
        <Button Grid.Column="0" Command="{Binding SelectTabCommand}" CommandParameter="calendar"
                Background="Transparent" BorderThickness="0" HorizontalAlignment="Stretch" Padding="2,0">
          <StackPanel HorizontalAlignment="Center" Spacing="0">
            <TextBlock Text="ðŸ“…" FontSize="14" HorizontalAlignment="Center"/>
            <Panel>
              <TextBlock Text="ìº˜ë¦°ë”" FontSize="12" HorizontalAlignment="Center" Foreground="#00FF00"
                         IsVisible="{Binding IsCalendarSelected}"/>
              <TextBlock Text="ìº˜ë¦°ë”" FontSize="12" HorizontalAlignment="Center" Foreground="White"
                         IsVisible="{Binding !IsCalendarSelected}"/>
            </Panel>
          </StackPanel>
        </Button>

        <!-- ì•Œë¦¼ -->
        <Button Grid.Column="1" Command="{Binding SelectTabCommand}" CommandParameter="notification"
                Background="Transparent" BorderThickness="0" HorizontalAlignment="Stretch" Padding="2,0">
          <StackPanel HorizontalAlignment="Center" Spacing="0">
            <TextBlock Text="ðŸ””" FontSize="14" HorizontalAlignment="Center"/>
            <Panel>
              <TextBlock Text="ì•Œë¦¼" FontSize="12" HorizontalAlignment="Center" Foreground="#00FF00"
                         IsVisible="{Binding IsNotificationSelected}"/>
              <TextBlock Text="ì•Œë¦¼" FontSize="12" HorizontalAlignment="Center" Foreground="White"
                         IsVisible="{Binding !IsNotificationSelected}"/>
            </Panel>
          </StackPanel>
        </Button>

        <!-- ë‹´ë‹¹ìž -->
        <Button Grid.Column="2" Command="{Binding SelectTabCommand}" CommandParameter="manager"
                Background="Transparent" BorderThickness="0" HorizontalAlignment="Stretch" Padding="2,0">
          <StackPanel HorizontalAlignment="Center" Spacing="0">
            <TextBlock Text="ðŸ‘¥" FontSize="14" HorizontalAlignment="Center"/>
            <Panel>
              <TextBlock Text="ê´€ë¦¬" FontSize="12" HorizontalAlignment="Center" Foreground="#00FF00"
                         IsVisible="{Binding IsManagerSelected}"/>
              <TextBlock Text="ê´€ë¦¬" FontSize="12" HorizontalAlignment="Center" Foreground="White"
                         IsVisible="{Binding !IsManagerSelected}"/>
            </Panel>
          </StackPanel>
        </Button>
      </Grid>
      </Panel>
    </Border>
    </Grid>

    <!-- ë“œë¡œì–´ ì˜¤ë²„ë ˆì´ (ë°˜íˆ¬ëª… ë°°ê²½) -->
    <Border x:Name="DrawerOverlay"
            Background="#000000"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            IsVisible="False"
            Opacity="0"
            PointerPressed="OnOverlayPressed"/>

    <!-- ì‚¬ì´ë“œ ë“œë¡œì–´ -->
    <Border x:Name="DrawerPanel"
            Background="#222222"
            Width="250"
            HorizontalAlignment="Left"
            IsVisible="False">
      <Border.RenderTransform>
        <TranslateTransform X="-250"/>
      </Border.RenderTransform>
      <Grid RowDefinitions="Auto,*,Auto">
        <!-- ë“œë¡œì–´ í—¤ë” -->
        <Border Grid.Row="0" Background="#333333" Padding="20">
          <StackPanel Spacing="8">
            <TextBlock Text="ì‚¬ìš©ìž ì •ë³´" FontSize="18" Foreground="White" FontFamily="Malgun Gothic, Microsoft YaHei, sans-serif"/>
            <TextBlock Text="{Binding CurrentUserName}" FontSize="16" Foreground="White" FontFamily="Malgun Gothic, Microsoft YaHei, sans-serif"/>
            <TextBlock Text="{Binding CurrentUserId}" FontSize="14" Foreground="#00FF00"/>
          </StackPanel>
        </Border>

        <!-- ë¹ˆ ê³µê°„ -->
        <Grid Grid.Row="1"/>

        <!-- ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ -->
        <Border Grid.Row="2" Padding="20">
          <Button Command="{Binding LogoutCommand}"
                  Background="#AA0000"
                  HorizontalAlignment="Stretch"
                  HorizontalContentAlignment="Center"
                  Padding="15">
            <TextBlock Text="ë¡œê·¸ì•„ì›ƒ" FontSize="16" Foreground="White"/>
          </Button>
        </Border>
      </Grid>
    </Border>

    <!-- ì—…ì²´ ë“±ë¡ í™”ë©´ ì˜¤ë²„ë ˆì´ -->
    <Border Background="#000000"
            IsVisible="{Binding IsCompanyRegisterOpen}"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch">
      <views:CompanyRegisterView x:Name="CompanyRegisterView"/>
    </Border>
  </Panel>
</UserControl>
